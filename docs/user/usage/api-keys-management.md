# Управление API-ключами

## Обзор

Meet2Obsidian использует внешние сервисы для расшифровки речи в текст и анализа текста. Для использования этих сервисов вам необходимо настроить соответствующие API-ключи. Это руководство объясняет, как получить, настроить и управлять API-ключами, необходимыми для meet2obsidian.

## Необходимые API-ключи

Meet2Obsidian требует следующие API-ключи:

1. **API-ключ Rev.ai**: Используется для преобразования речи в текст из аудиозаписей встреч.
2. **API-ключ Claude**: Используется для анализа транскриптов и создания структурированных заметок.

## Получение API-ключей

### API-ключ Rev.ai

1. Перейдите на сайт [Rev.ai](https://www.rev.ai/) и создайте учетную запись.
2. Перейдите в настройки вашей учетной записи или панель разработчика.
3. Создайте новый API-ключ.
4. Скопируйте API-ключ для настройки в meet2obsidian.

### API-ключ Claude

1. Перейдите на сайт [Anthropic's Claude](https://console.anthropic.com/) и создайте учетную запись.
2. Перейдите в раздел API в панели управления вашей учетной записи.
3. Создайте новый API-ключ.
4. Скопируйте API-ключ для настройки в meet2obsidian.

## Настройка API-ключей

Meet2Obsidian предоставляет несколько способов настройки API-ключей:

### Использование команды настройки CLI

Самый простой способ настроить все необходимые API-ключи одновременно:

```bash
meet2obsidian apikeys setup
```

Эта команда предложит вам ввести оба API-ключа безопасно (ввод будет скрыт).

### Установка отдельных API-ключей

Вы можете установить каждый API-ключ по отдельности с помощью следующих команд:

```bash
# Установка API-ключа Rev.ai
meet2obsidian apikeys set rev_ai

# Установка API-ключа Claude
meet2obsidian apikeys set claude
```

Вам будет предложено безопасно ввести значение API-ключа.

### Использование скрипта настройки

Альтернативно, вы можете использовать включенный скрипт настройки:

```bash
python scripts/setup_api_keys.py --revai YOUR_REV_AI_KEY --claude YOUR_CLAUDE_KEY
```

## Проверка API-ключей

Вы можете проверить, настроены ли и действительны ли ваши API-ключи:

### Проверка статуса настройки

```bash
# Показать список всех необходимых API-ключей и их статус настройки
meet2obsidian apikeys list
```

Пример вывода:
```
Статус API-ключей:
------------------------
rev_ai      : Настроен
claude      : Не настроен
```

### Тестирование API-ключей

Чтобы проверить, что ваши API-ключи не только настроены, но и действительны:

```bash
python scripts/setup_api_keys.py --test
```

Это проверит каждый настроенный API-ключ, сделав простой тестовый API-вызов.

## Управление API-ключами

### Просмотр API-ключей

Вы можете проверить конкретный API-ключ:

```bash
# Просмотр маскированного API-ключа (по умолчанию)
meet2obsidian apikeys get rev_ai

# Просмотр фактического значения API-ключа (использовать с осторожностью)
meet2obsidian apikeys get rev_ai --show
```

### Удаление API-ключей

Если вам нужно удалить API-ключ:

```bash
meet2obsidian apikeys delete rev_ai
```

Вам будет предложено подтвердить это действие.

## Обновление API-ключей

Если вам нужно обновить API-ключ (например, при создании нового ключа), просто установите его снова:

```bash
meet2obsidian apikeys set rev_ai
```

Новое значение заменит старое.

## Безопасность API-ключей

Meet2Obsidian серьезно относится к безопасности и реализует следующие меры для защиты ваших API-ключей:

1. **Безопасное хранение**: API-ключи хранятся в безопасном хранилище учетных данных вашей операционной системы (macOS Keychain).
2. **Шифрование**: Ключи шифруются в состоянии покоя с использованием механизмов безопасности ОС.
3. **Минимальное раскрытие**: Полные значения API-ключей никогда не логируются и не отображаются, если это явно не запрошено.
4. **Только локально**: Ваши API-ключи никогда не покидают ваш компьютер, кроме как при прямых API-вызовах соответствующим сервисам.

## Устранение неполадок

### API-ключ не найден

Если вы получаете ошибку, указывающую, что API-ключ не найден:

1. Проверьте, настроен ли ключ, используя `meet2obsidian apikeys list`
2. Если не настроен, настройте ключ, используя `meet2obsidian apikeys set ИМЯ_КЛЮЧА`

### Недействительный API-ключ

Если вы получаете ошибку, указывающую, что API-ключ недействителен:

1. Проверьте правильность API-ключа, проверив в панели управления соответствующего сервиса
2. При необходимости обновите API-ключ, используя `meet2obsidian apikeys set ИМЯ_КЛЮЧА`
3. Проверьте API-ключ, используя `python scripts/setup_api_keys.py --test`

### Проблемы с доступом к хранилищу ключей

Если у вас возникают проблемы с доступом к хранилищу ключей:

1. Убедитесь, что у вас есть соответствующий доступ к хранилищу ключей
2. Система может запросить ваш пароль при доступе к хранилищу ключей
3. Убедитесь, что ваше хранилище ключей разблокировано

## Лучшие практики

1. **Регулярно обновляйте ключи**: Периодически создавайте новые API-ключи и обновляйте их в meet2obsidian.
2. **Используйте выделенные ключи**: По возможности создавайте API-ключи специально для meet2obsidian, а не делитесь ключами с другими приложениями.
3. **Отслеживайте использование**: Регулярно проверяйте использование вашего API на соответствующих панелях управления сервисами, чтобы убедиться в отсутствии несанкционированного использования.
4. **Установите соответствующие лимиты**: По возможности настройте лимиты использования на стороне поставщика API, чтобы предотвратить неожиданные расходы.

## Квоты и цены API

Помните, что сервисы Rev.ai и Claude API имеют свои модели ценообразования и квоты использования:

- **Rev.ai**: Обычно взимает плату за минуту транскрибированного аудио.
- **Claude API**: Обычно взимает плату за токен входных и выходных данных.

Обязательно проверьте текущие модели ценообразования на соответствующих веб-сайтах и отслеживайте свое использование, чтобы избежать неожиданных расходов.

## Часто задаваемые вопросы

**В: Можно ли использовать meet2obsidian без API-ключей?**

О: Нет, API-ключи Rev.ai и Claude необходимы для функционирования основных возможностей meet2obsidian. Без них приложение не сможет выполнять транскрипцию или анализ содержимого.

**В: Могу ли я использовать альтернативные сервисы вместо Rev.ai или Claude?**

О: В настоящее время meet2obsidian поддерживает только API Rev.ai и Claude. Поддержка альтернативных сервисов может быть добавлена в будущих версиях.

**В: Как долго действительны мои API-ключи?**

О: Срок действия API-ключей зависит от политики каждого поставщика API. Некоторые ключи не имеют срока действия, в то время как другие могут требовать обновления через определенные периоды времени. Проверьте политику поставщика вашего API для получения конкретной информации.

**В: Что делать, если я подозреваю, что мой API-ключ скомпрометирован?**

О: Немедленно отозвите ключ на веб-сайте поставщика API и создайте новый. Затем обновите новый ключ в meet2obsidian с помощью соответствующей команды `apikeys set`.